# üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Production —Å–±–æ—Ä–∫–∏

## ‚úÖ –î–∞, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å production —Å–±–æ—Ä–∫—É –ª–æ–∫–∞–ª—å–Ω–æ!

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ development –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose down
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ production —Å–±–æ—Ä–∫—É
```bash
docker-compose -f docker-compose.prod.yml --env-file .env.production up -d
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
```bash
docker-compose -f docker-compose.prod.yml ps
```

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
http://localhost:3000
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Development vs Production

### –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞:
- **Development**: ~1465ms
- **Production**: ~29ms ‚ö° (–≤ 50 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!)

### –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞:
- **Development**: ~500MB (—Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏)
- **Production**: ~226MB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API:
```bash
# Production
Time: 0.025s (25ms)

# –û–±—ã—á–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 30-50%
```

---

## üîç –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
curl http://localhost:3000/api/registrations

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å
curl -X POST http://localhost:3000/api/registrations \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test User",
    "drinks": ["–®–∞–º–ø–∞–Ω—Å–∫–æ–µ"],
    "individual_wishes": "Test",
    "cookie_id": "test-123"
  }'
```

### –õ–æ–≥–∏
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs

# –¢–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
docker-compose -f docker-compose.prod.yml logs app --tail 50

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose -f docker-compose.prod.yml logs -f
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats gatsby-app-prod gatsby-postgres-prod

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect gatsby-app-prod
```

---

## üß™ –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ API
```bash
# –° –∑–∞–º–µ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏
curl -X GET http://localhost:3000/api/registrations -w "\nTime: %{time_total}s\n"
```

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å Apache Bench)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (macOS)
brew install apache-bench

# 1000 –∑–∞–ø—Ä–æ—Å–æ–≤, 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
ab -n 1000 -c 10 http://localhost:3000/api/registrations
```

### –¢–µ—Å—Ç —Å wrk (–±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (macOS)
brew install wrk

# –¢–µ—Å—Ç –Ω–∞ 30 —Å–µ–∫—É–Ω–¥, 10 –ø–æ—Ç–æ–∫–æ–≤, 100 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
wrk -t10 -c100 -d30s http://localhost:3000/api/registrations
```

---

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

### Development ‚Üí Production
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å development
docker-compose down

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å production
docker-compose -f docker-compose.prod.yml --env-file .env.production up -d
```

### Production ‚Üí Development
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å production
docker-compose -f docker-compose.prod.yml down

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å development
docker-compose up -d
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã)
```bash
# Development –Ω–∞ –ø–æ—Ä—Ç—É 3000
docker-compose up -d

# Production –Ω–∞ –ø–æ—Ä—Ç—É 8080
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env.production:
# APP_PORT=8080
docker-compose -f docker-compose.prod.yml --env-file .env.production up -d
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ Production –ª–æ–∫–∞–ª—å–Ω–æ

### –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
–î–æ–±–∞–≤—å—Ç–µ –≤ `docker-compose.prod.yml` –≤ —Å–µ–∫—Ü–∏—é `app.environment`:
```yaml
- DEBUG=*
- NODE_ENV=production
```

### –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
```bash
# –í–æ–π—Ç–∏ –≤ shell –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it gatsby-app-prod sh

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã
ls -la

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
docker exec gatsby-app-prod env
```

---

## üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –†–∞–∑–º–µ—Ä JavaScript –±–∞–Ω–¥–ª–æ–≤
```bash
# –ü–æ—Å–ª–µ –±–∏–ª–¥–∞ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥
docker-compose -f docker-compose.prod.yml logs app | grep "Route"

# –í—ã —É–≤–∏–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü:
# ‚îú ‚óã /                           5.2 kB (compressed)
# ‚îú ‚óã /api/registrations         0 B
# ‚îî ‚óã /results                   2.8 kB (compressed)
```

### –ê–Ω–∞–ª–∏–∑ bundle size (–¥–µ—Ç–∞–ª—å–Ω–æ)
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (–Ω–µ –≤ Docker)
npm run build

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
```

---

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- [ ] –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- [ ] –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ /results —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API endpoints –æ—Ç–≤–µ—á–∞—é—Ç

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (< 1 —Å–µ–∫)
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç –±—ã—Å—Ç—Ä–æ (< 100ms)
- [ ] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å docker stats)
- [ ] CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ (< 20% –≤ –ø–æ–∫–æ–µ)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] .env —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–±—Ä–∞–∑
- [ ] Source maps –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –ª–æ–≥–∞—Ö

---

## üßπ –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose -f docker-compose.prod.yml down
```

### –£–¥–∞–ª–∏—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ë–î
```bash
docker-compose -f docker-compose.prod.yml down -v
```

### –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑—ã
```bash
docker rmi v0-gatsby-style-website-app
```

### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Docker
```bash
# –û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –£–¥–∞–ª–∏—Ç –≤—Å—ë –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ
docker system prune -a
```

---

## üìä –ë–µ–Ω—á–º–∞—Ä–∫–∏ (–Ω–∞ –º–æ–µ–π –º–∞—à–∏–Ω–µ)

### –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞
| –†–µ–∂–∏–º | –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç | –ü–æ—Å–ª–µ –∫—ç—à–∞ |
|-------|----------------|------------|
| Development | 2.5s | 1.5s |
| Production | 100ms | 29ms |

### API Response Time
| Endpoint | Development | Production |
|----------|-------------|------------|
| GET /api/registrations | 50-80ms | 15-30ms |
| POST /api/registrations | 100-150ms | 20-40ms |

### –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü
| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | Development | Production |
|----------|-------------|------------|
| / (–≥–ª–∞–≤–Ω–∞—è) | ~15 kB | ~5 kB |
| /results | ~10 kB | ~3 kB |

---

## ‚ö° –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ï—Å–ª–∏ production –º–µ–¥–ª–µ–Ω–Ω—ã–π:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã Docker**
   ```bash
   # macOS: Docker Desktop ‚Üí Settings ‚Üí Resources
   # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –º–∏–Ω–∏–º—É–º 2 CPU, 4GB RAM
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ BuildKit**
   ```bash
   DOCKER_BUILDKIT=1 docker-compose -f docker-compose.prod.yml build
   ```

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à**
   ```bash
   docker-compose -f docker-compose.prod.yml build --no-cache
   ```

---

## üéì –í—ã–≤–æ–¥—ã

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è production:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω—ã–º –¥–µ–ø–ª–æ–µ–º
2. **–û—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥—á–µ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –≤ production —Å–±–æ—Ä–∫–µ
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —É–≤–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
4. **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** - –∑–Ω–∞—Ç—å, —á—Ç–æ production –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ production –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ dev –∏ prod
3. –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∞–∑–º–µ—Ä–æ–º –æ–±—Ä–∞–∑–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫
5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [PRODUCTION_GUIDE.md](./PRODUCTION_GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ production
- [Docker Documentation](https://docs.docker.com/)
- [Next.js Deployment](https://nextjs.org/docs/deployment)

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**
